<!DOCTYPE html>
<html>
  <head>
    <title>Rail Fence Cipher Decryption</title>
  </head>
  <body>
    <h1>Rail Fence Cipher Decryption</h1>
    <label for="ciphertext">Enter ciphertext:</label>
    <input type="text" id="ciphertext" /><br /><br />
    <label for="key">Enter the number of rails:</label>
    <input type="text" id="key" /><br /><br />
    <button onclick="decrypt()">Decrypt</button><br /><br />
    <label for="plaintext">Plaintext:</label>
    <input type="text" id="plaintext" readonly /><br /><br />
    <script>
      function decrypt() {
        var ciphertext = document.getElementById("ciphertext").value;
        var key = parseInt(document.getElementById("key").value);
        var plaintext = "";

        var railLengths = new Array(key).fill(0); // initialize an array to keep track of the length of each rail
        var currentRail = 0; // start at the first rail
        var direction = 1; // start moving down

        // iterate through the ciphertext and update the length of each rail
        for (var i = 0; i < ciphertext.length; i++) {
          railLengths[currentRail]++;
          currentRail += direction;
          if (currentRail === key - 1 || currentRail === 0) {
            direction *= -1;
          }
        }

        var railOffsets = new Array(key).fill(0); // initialize an array to keep track of the offset of each rail
        var offset = 0; // start at the beginning of the ciphertext

        // iterate through the rail offsets and update the offset of each rail
        for (var i = 0; i < key; i++) {
          railOffsets[i] = offset;
          offset += railLengths[i];
        }

        // iterate through the ciphertext and retrieve the plaintext by following the rail pattern
        for (var i = 0; i < ciphertext.length; i++) {
          var railIndex = getRailIndex(i, key);
          var railOffset = railOffsets[railIndex];
          plaintext += ciphertext.charAt(railOffset);
          railOffsets[railIndex]++;
        }

        document.getElementById("plaintext").value = plaintext;
      }

      function getRailIndex(position, key) {
        var currentRail = 0;
        var direction = 1;

        // iterate through the rails to find the rail at the given position
        for (var i = 0; i < position; i++) {
          currentRail += direction;
          if (currentRail === key - 1 || currentRail === 0) {
            direction *= -1;
          }
        }

        return currentRail;
      }
    </script>
  </body>
</html>
